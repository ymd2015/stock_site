<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>6594 ニデック - 詳細レポート</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
      body { padding-top: 20px; background-color: #f8f9fa; }
      .card { margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      .stock-header { background-color: #fff; padding: 20px; border-bottom: 1px solid #eee; margin-bottom: 20px; }
      .signal-badge { font-size: 0.9em; margin-right: 5px; }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">株式監視レポート</a>
        <span class="navbar-text text-light">
          最終更新: 2025-12-01 03:23
        </span>
      </div>
    </nav>
    <div style="height: 60px;"></div>

    <div class="container">
      
<div class="row mb-3">
  <div class="col">
    <a href="index.html" class="btn btn-outline-secondary">&larr; 一覧に戻る</a>
  </div>
</div>

<div class="stock-header rounded">
  <div class="row align-items-center">
    <div class="col-12 col-md-8">
      <h1 class="display-6 mb-2 mb-md-0" style="font-size:2rem;">
        <span class="text-muted fs-4">6594</span> ニデック
      </h1>
      <div class="mt-2">
        <span class="badge bg-dark fs-5 me-2">1,996 円</span>
        
        <span class="badge bg-light text-dark border">利回り 2.03%</span>
        
        <span class="badge bg-light text-dark border">PER 19.02倍</span>
        <span class="badge bg-light text-dark border">PBR 1.30倍</span>
        <span class="badge bg-light text-dark border">ROE 6.34%</span>
        <span class="badge bg-light text-dark border">信用倍率 9.23倍</span>
      </div>
      
      
      
    </div>
    <div class="col-12 col-md-4 text-md-end mt-3 mt-md-0">
      <div class="card bg-light">
        <div class="card-body py-2">
          <h6 class="card-title text-muted mb-1">相場判定</h6>
          <p class="card-text fs-5 fw-bold">下降トレンド(強度:25)</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- シグナル情報 -->


<!-- チャートエリア -->
<div class="card mb-4">
  <div class="card-header">株価チャート & テクニカル</div>
  <div class="card-body">
    <div id="mainChart" class="img-fluid w-100" style="height: 600px;"></div>
  </div>
</div>

<!-- 詳細テクニカル指標 -->
<div class="card mb-4">
  <div class="card-header">詳細テクニカル指標</div>
  <div class="card-body">
    <div class="row text-center">
      <div class="col-md-3 border-end">
        <div class="text-muted small">RSI (14)</div>
        <div class="fs-5 fw-bold">46.26</div>
      </div>
      <div class="col-md-3 border-end">
        <div class="text-muted small">Stoch %K</div>
        <div class="fs-5 fw-bold">18.46</div>
      </div>
      <div class="col-md-3 border-end">
        <div class="text-muted small">Stoch %D</div>
        <div class="fs-5 fw-bold">16.7</div>
      </div>
      <div class="col-md-3">
        <div class="text-muted small">価格位置</div>
        <div class="fs-5 fw-bold">12.3</div>
      </div>
    </div>
  </div>
</div>

<!-- 信用取引情報 -->
<div class="card mb-4">
  <div class="card-header">信用取引詳細 (基準日: 2025-11-21)</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered table-hover text-center align-middle">
        <thead class="table-light">
          <tr>
            <th>項目</th>
            <th>合計</th>
            <th>制度信用</th>
            <th>一般信用</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>信用倍率</th>
            <td class="fw-bold">9.23倍</td>
            <td>4.68倍</td>
            <td>82.43倍</td>
          </tr>
          <tr>
            <th>信用圧力<br><span class="small text-muted">(前週)</span></th>
            <td>
              0.53<br>
              <span class="small text-muted">(0.57)</span>
            </td>
            <td>
              0.22<br>
              <span class="small text-muted">(0.21)</span>
            </td>
            <td>
              0.31<br>
              <span class="small text-muted">(0.36)</span>
            </td>
          </tr>
          <tr>
            <th>売り残<br><span class="small text-muted">(前週比)</span></th>
            <td>
              1,569,100<br>
              <span class="text-danger">
                -397,500
              </span>
            </td>
            <td>
              1,477,200<br>
              <span class="text-danger">
                -389,200
              </span>
            </td>
            <td>
              91,900<br>
              <span class="text-danger">
                -8,300
              </span>
            </td>
          </tr>
          <tr>
            <th>買い残<br><span class="small text-muted">(前週比)</span></th>
            <td>
              14,488,700<br>
              <span class="text-success">
                -1,188,000
              </span>
            </td>
            <td>
              6,913,500<br>
              <span class="text-danger">
                +77,900
              </span>
            </td>
            <td>
              7,575,200<br>
              <span class="text-success">
                -1,265,900
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  // Pythonから渡されたチャートデータ
  const chartData = {"dates": ["2024-11-21", "2024-11-22", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-28", "2024-11-29", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-23", "2024-12-24", "2024-12-25", "2024-12-26", "2024-12-27", "2024-12-30", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-20", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-25", "2025-11-26", "2025-11-27", "2025-11-28"], "open": [2866.3588538084596, 2850.4788320339835, 2836.5837138741713, 2833.6062125171825, 2798.8684901630677, 2779.018426466022, 2769.093197028131, 2764.130786536975, 2740.310588075859, 2828.643649022342, 2828.6438195180085, 2782.4921319759433, 2793.9060636958047, 2828.643711681154, 2798.8686158996948, 2839.0650066271623, 2795.8910286793503, 2805.81613846316, 2776.0409715747646, 2808.793473480441, 2737.333121444365, 2749.243197798295, 2719.4679523701, 2709.5429079853097, 2699.121700981988, 2670.8352120535715, 2741.7992698194444, 2848.4937994267184, 2878.268917221752, 2806.808484810757, 2848.4938154926162, 2893.1565815510553, 2904.0743108785377, 2888.1940812043495, 2848.493923231915, 2858.4190217871665, 2781.4997365862623, 2768.100803591376, 2808.7935432190966, 2808.793683978873, 2878.269098069213, 2798.8684623187532, 2838.5686662250623, 2774.0558543498996, 2697.6328082269824, 2694.6552345047758, 2699.6178861080125, 2620.2172951953203, 2573.5694507374656, 2550.7419605255127, 2563.644458863292, 2576.0506832860096, 2599.8708489661744, 2690.6852527661554, 2729.392985772649, 2700.1140076012043, 2649.992428608393, 2641.556244178575, 2679.76777094385, 2729.393164660108, 2740.310532597771, 2729.3930571604815, 2797.875902333221, 2751.7244908461257, 2698.62526446673, 2659.9176496643045, 2635.601197294045, 2611.284796111642, 2652.4737852468643, 2633.616153593895, 2674.8051466531547, 2635.6011658926545, 2624.1873412859463, 2679.7677472410865, 2601.8558869521653, 2669.8426429875926, 2705.5729594511145, 2714.009221889076, 2743.288199992528, 2709.5428520810287, 2680.264092813371, 2679.767691846696, 2650.985013113526, 2625.5, 2545.0, 2494.0, 2467.0, 2307.5, 2219.0, 1899.0, 1987.0, 1928.5, 2162.0, 1988.5, 2115.0, 2142.0, 2120.0, 2050.0, 2100.0, 2100.0, 2075.0, 2166.0, 2237.0, 2475.0, 2600.0, 2502.5, 2533.5, 2596.5, 2697.0, 2610.0, 2622.0, 2645.0, 2784.5, 2815.5, 2805.0, 2851.5, 2780.0, 2791.0, 2796.0, 2705.5, 2690.0, 2720.0, 2760.0, 2850.0, 2817.0, 2813.0, 2750.0, 2747.0, 2759.0, 2713.5, 2730.0, 2703.5, 2773.5, 2860.0, 2910.0, 2884.5, 2866.0, 2925.0, 2881.5, 2879.0, 2856.0, 2856.0, 2880.0, 2913.0, 2935.0, 2882.5, 2802.0, 2805.0, 2736.5, 2700.0, 2706.0, 2659.0, 2640.5, 2681.0, 2697.5, 2700.0, 2685.0, 2674.0, 2720.0, 2660.0, 2724.0, 2737.5, 2811.0, 2915.0, 3049.0, 2970.0, 2918.0, 2878.0, 2858.0, 2895.0, 2810.0, 2853.0, 2882.0, 2851.0, 2938.0, 2882.0, 2882.0, 2870.0, 2897.5, 2898.0, 3020.0, 3110.0, 3031.0, 3078.0, 3137.0, 3276.0, 3236.0, 3205.0, 3229.0, 3150.0, 3166.0, 3138.0, 2430.0, 2420.5, 2581.0, 2536.5, 2460.5, 2469.0, 2510.0, 2667.0, 2672.0, 2685.0, 2729.0, 2678.0, 2693.0, 2664.0, 2650.0, 2600.0, 2584.0, 2600.0, 2580.0, 2595.0, 2662.5, 2625.0, 2620.0, 2680.0, 2703.5, 2590.0, 2573.0, 2550.0, 2485.0, 2530.0, 2566.0, 2570.0, 2562.0, 2277.0, 2469.0, 2070.5, 2020.5, 1950.0, 1888.5, 1833.0, 2056.0, 2045.0, 2039.0, 2020.0, 2100.0, 2310.0, 2294.0, 2200.0, 2151.0, 2079.0, 2041.0, 2081.0, 1915.0, 1961.0, 1940.0, 1958.0, 1960.0], "high": [2925.9092455080813, 2872.313976290511, 2864.870150489082, 2851.9675837716723, 2840.0575122700775, 2796.883544921875, 2781.4995285560344, 2777.033371896034, 2873.3064659469796, 2839.5612210010245, 2831.1250860263576, 2794.898463935886, 2816.23746207348, 2885.216585914777, 2808.7936819135234, 2855.441364819558, 2821.6961996930754, 2818.222470875891, 2806.8086763008346, 2819.7110452854886, 2763.634545562667, 2769.0933291903407, 2724.4304851299, 2715.0016940636683, 2711.0317801920573, 2719.468034569597, 2853.4562536582453, 2877.2764893860826, 2878.268917221752, 2884.223994646414, 2942.7819383050896, 2920.450511565688, 2912.510616976442, 2888.1940812043495, 2873.30658806843, 2867.847834532645, 2796.883588831432, 2791.424707816689, 2808.7935432190966, 2834.1026023327463, 2932.3607069812037, 2868.3439206032613, 2845.019958648301, 2777.52962733388, 2737.333070305378, 2704.0840465592123, 2708.0541920021, 2622.202308297741, 2597.885860896767, 2566.1258128166196, 2599.87094850654, 2611.2846648913473, 2651.481188399746, 2743.784353106616, 2729.392985772649, 2715.001605511154, 2658.4287340927267, 2649.496296762993, 2768.100856726814, 2774.055961900001, 2803.8309505935176, 2804.823556194735, 2815.74101983659, 2775.048395457445, 2703.58779713401, 2669.346462228413, 2672.8201936783516, 2652.4738189313434, 2699.121593631, 2680.7602151336387, 2681.2564392146555, 2648.5037511521555, 2709.5429053368507, 2711.0317042922325, 2672.8201043533018, 2709.046652057485, 2718.4755450978, 2816.7336521196553, 2782.492210086488, 2739.318048257743, 2699.617971654275, 2695.151543411001, 2658.4288122892467, 2636.0, 2545.5, 2506.0, 2476.5, 2346.5, 2245.5, 1979.0, 2065.0, 1940.0, 2169.5, 2093.0, 2154.0, 2166.0, 2124.0, 2095.0, 2129.0, 2138.5, 2104.0, 2197.5, 2260.0, 2525.5, 2624.0, 2542.0, 2571.5, 2640.0, 2718.0, 2624.0, 2623.5, 2671.5, 2809.0, 2830.5, 2890.0, 2859.0, 2790.5, 2824.0, 2814.0, 2705.5, 2719.0, 2783.0, 2799.0, 2863.0, 2854.5, 2828.0, 2762.0, 2775.5, 2773.5, 2732.0, 2731.0, 2736.5, 2873.0, 2916.0, 2911.5, 2893.0, 2905.0, 2953.5, 2897.0, 2881.5, 2880.5, 2878.0, 2892.0, 2920.0, 2946.0, 2885.0, 2823.0, 2816.5, 2767.0, 2724.5, 2713.0, 2671.5, 2678.5, 2723.5, 2704.0, 2719.0, 2691.5, 2706.5, 2753.0, 2721.0, 2747.5, 2773.5, 2898.0, 2947.0, 3057.0, 2975.0, 2929.0, 2903.5, 2919.0, 2927.0, 2853.5, 2903.5, 2903.0, 2921.5, 2944.5, 2906.0, 2914.5, 2912.5, 2929.5, 2988.5, 3137.0, 3137.0, 3123.0, 3106.0, 3296.0, 3287.0, 3238.0, 3235.0, 3237.0, 3195.0, 3186.0, 3165.0, 2613.5, 2548.0, 2599.0, 2545.5, 2474.0, 2510.5, 2670.0, 2713.0, 2706.0, 2698.0, 2768.0, 2742.5, 2699.5, 2723.5, 2660.0, 2692.0, 2634.5, 2618.0, 2613.0, 2619.0, 2678.0, 2654.5, 2670.0, 2710.0, 2729.5, 2612.0, 2573.0, 2569.5, 2521.0, 2559.0, 2604.0, 2630.0, 2569.5, 2464.0, 2583.0, 2123.5, 2021.0, 2067.0, 1894.5, 1967.0, 2065.0, 2063.0, 2048.0, 2085.0, 2230.0, 2340.0, 2333.0, 2273.0, 2188.0, 2098.0, 2047.0, 2082.0, 1936.0, 1966.0, 1958.0, 1959.0, 1973.0], "low": [2856.4337885251894, 2817.2298623706347, 2826.1623951213096, 2759.1682209449273, 2774.0558262431823, 2754.7020152344444, 2734.35546875, 2704.5803925720847, 2739.318081524582, 2777.5295620312363, 2770.582183222639, 2756.686961499263, 2773.5596785072566, 2814.7486197641238, 2774.055950865123, 2820.7036353205367, 2784.97345632739, 2769.5896478179866, 2761.1533725137633, 2781.995797231688, 2707.061671044056, 2729.39306640625, 2661.9025723564264, 2683.7377374330686, 2664.880223253038, 2670.8352120535715, 2737.332990465892, 2816.733589816386, 2782.4920377348903, 2793.40964656997, 2848.4938154926162, 2879.2614899072423, 2864.3740468884007, 2806.3122902423706, 2824.1775116921303, 2801.8461453142954, 2734.355673254292, 2760.6570043705315, 2748.746896800455, 2779.018485915493, 2833.6063017198635, 2734.8517900423135, 2777.033261572631, 2689.6927961675233, 2687.7077427073837, 2676.7901169279485, 2669.346435546875, 2524.9366662791267, 2541.31298828125, 2527.9143087387083, 2561.659445732155, 2566.1256180450696, 2595.4045695921154, 2690.6852527661554, 2701.1065493746414, 2666.368785671985, 2632.623564375941, 2626.668645582791, 2669.8427051255394, 2718.4755920014677, 2724.926681364426, 2724.9267776124007, 2748.7468291989553, 2741.303171764472, 2650.984950860845, 2622.698652700718, 2588.9533884923803, 2589.4496514843313, 2652.4737852468643, 2621.7060748891176, 2612.27723413399, 2567.6144666406694, 2624.1873412859463, 2627.6611521558434, 2601.359633683626, 2669.8426429875926, 2693.6628803926355, 2714.009221889076, 2698.129150390625, 2681.2564157131496, 2647.5113747749187, 2656.4437878621043, 2625.1798426376918, 2592.0, 2480.5, 2477.5, 2439.0, 2297.0, 2140.5, 1893.0, 1987.0, 1862.5, 2124.5, 1971.5, 2111.5, 2134.5, 2048.0, 2045.0, 2083.0, 2083.0, 2062.0, 2157.0, 2218.5, 2427.0, 2550.5, 2464.0, 2524.5, 2581.0, 2617.5, 2568.5, 2573.5, 2628.5, 2753.5, 2767.0, 2795.5, 2797.0, 2751.0, 2761.5, 2731.0, 2668.0, 2669.0, 2709.5, 2758.0, 2812.5, 2808.0, 2799.0, 2735.5, 2737.5, 2744.0, 2701.5, 2700.5, 2697.5, 2770.5, 2839.5, 2850.5, 2825.5, 2862.0, 2911.5, 2845.0, 2836.0, 2847.0, 2833.0, 2859.0, 2883.0, 2883.5, 2753.0, 2785.0, 2737.0, 2709.0, 2686.0, 2645.0, 2618.5, 2637.0, 2661.0, 2655.0, 2660.0, 2640.0, 2660.0, 2694.0, 2655.5, 2718.5, 2700.5, 2811.0, 2914.0, 2942.5, 2938.5, 2873.0, 2862.5, 2848.0, 2877.5, 2806.0, 2821.0, 2868.0, 2844.5, 2880.5, 2866.0, 2875.0, 2863.0, 2871.5, 2881.0, 3007.0, 3029.0, 3017.0, 3064.0, 3133.0, 3224.0, 3164.0, 3190.0, 3209.0, 3128.0, 3143.0, 3110.0, 2420.0, 2405.0, 2505.0, 2465.0, 2432.5, 2447.5, 2503.0, 2651.0, 2658.0, 2630.0, 2652.0, 2644.0, 2641.5, 2658.0, 2621.0, 2510.0, 2550.5, 2566.5, 2538.0, 2591.0, 2606.5, 2620.0, 2612.5, 2651.5, 2663.0, 2514.0, 2538.5, 2488.0, 2468.5, 2505.0, 2561.0, 2568.0, 2534.5, 2277.0, 2464.0, 2070.5, 1892.5, 1935.0, 1797.0, 1830.0, 1975.0, 2022.0, 1990.0, 2010.0, 2096.0, 2268.0, 2248.0, 2198.0, 2032.0, 2027.0, 1979.0, 1968.0, 1885.0, 1896.0, 1898.0, 1923.0, 1933.0], "close": [2886.208984375, 2836.583740234375, 2845.02001953125, 2797.8759765625, 2786.462158203125, 2796.883544921875, 2734.35546875, 2727.904296875, 2846.5087890625, 2830.628662109375, 2781.499755859375, 2786.462158203125, 2802.838623046875, 2815.244873046875, 2805.816162109375, 2836.583740234375, 2795.394775390625, 2777.033447265625, 2794.40234375, 2798.868408203125, 2742.295654296875, 2729.39306640625, 2721.94921875, 2687.707763671875, 2679.767822265625, 2709.54296875, 2821.696044921875, 2833.606201171875, 2784.47705078125, 2864.8701171875, 2911.021728515625, 2906.555419921875, 2893.15673828125, 2836.583740234375, 2840.0576171875, 2807.304931640625, 2778.522216796875, 2776.537109375, 2772.07080078125, 2818.71875, 2924.420654296875, 2832.117431640625, 2785.9658203125, 2690.685302734375, 2721.94921875, 2688.7001953125, 2669.346435546875, 2534.365478515625, 2541.31298828125, 2540.81689453125, 2577.53955078125, 2598.382080078125, 2637.08984375, 2720.46044921875, 2704.580322265625, 2674.308837890625, 2637.08984375, 2630.638671875, 2759.66455078125, 2757.183349609375, 2800.357177734375, 2778.02587890625, 2761.6494140625, 2771.078369140625, 2664.3837890625, 2660.91015625, 2591.930908203125, 2643.541259765625, 2663.391357421875, 2674.80517578125, 2670.3388671875, 2624.68359375, 2674.80517578125, 2630.638671875, 2665.87255859375, 2674.80517578125, 2699.617919921875, 2768.100830078125, 2698.129150390625, 2691.677734375, 2669.8427734375, 2684.730224609375, 2649.0, 2603.0, 2492.0, 2481.0, 2449.0, 2309.5, 2181.0, 1907.0, 2018.5, 1880.5, 2162.0, 2087.5, 2142.5, 2146.0, 2064.5, 2095.0, 2129.0, 2090.0, 2094.0, 2184.0, 2232.0, 2510.5, 2550.5, 2533.0, 2564.0, 2618.5, 2621.5, 2580.0, 2609.0, 2663.5, 2765.5, 2794.0, 2861.5, 2797.0, 2787.5, 2766.5, 2732.5, 2675.0, 2707.5, 2768.0, 2789.5, 2812.5, 2847.5, 2810.0, 2747.0, 2741.5, 2760.0, 2712.0, 2702.5, 2725.0, 2841.0, 2894.5, 2877.0, 2859.5, 2887.5, 2931.5, 2877.5, 2870.0, 2872.0, 2869.0, 2887.0, 2917.0, 2887.0, 2778.0, 2805.0, 2743.5, 2709.0, 2720.0, 2659.0, 2636.0, 2655.5, 2678.0, 2666.5, 2708.5, 2665.5, 2706.5, 2703.0, 2721.0, 2742.5, 2721.0, 2898.0, 2931.5, 2970.0, 2943.0, 2885.5, 2874.5, 2913.0, 2902.0, 2833.0, 2892.0, 2884.5, 2909.5, 2882.0, 2874.0, 2895.0, 2912.5, 2884.0, 2986.0, 3120.0, 3057.0, 3104.0, 3104.0, 3275.0, 3235.0, 3228.0, 3231.0, 3211.0, 3170.0, 3172.0, 3120.0, 2420.0, 2531.0, 2536.5, 2466.5, 2469.0, 2502.5, 2601.5, 2671.0, 2691.0, 2691.0, 2680.0, 2731.0, 2642.0, 2662.5, 2636.5, 2560.0, 2633.5, 2580.0, 2591.0, 2612.5, 2623.5, 2623.5, 2650.5, 2694.0, 2672.0, 2537.0, 2539.5, 2509.0, 2494.0, 2558.5, 2580.0, 2612.0, 2550.5, 2460.0, 2570.5, 2070.5, 1960.0, 1947.0, 1883.0, 1967.0, 2040.0, 2051.0, 2021.0, 2073.0, 2191.0, 2285.0, 2248.0, 2246.0, 2064.0, 2043.0, 2031.0, 1975.0, 1921.0, 1913.0, 1958.0, 1956.0, 1969.0], "sma5": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "sma25": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "sma75": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "adx": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "plus_di": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "minus_di": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null], "trendline": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null]};

  // ローソク足
  const traceCandle = {
    x: chartData.dates,
    close: chartData.close,
    high: chartData.high,
    low: chartData.low,
    open: chartData.open,
    type: 'candlestick',
    name: '株価',
    xaxis: 'x',
    yaxis: 'y'
  };

  // 移動平均線
  const traceSMA5 = {
    x: chartData.dates,
    y: chartData.sma5,
    type: 'scatter',
    mode: 'lines',
    name: 'SMA5',
    line: {color: '#FF5733', width: 1}
  };
  
  const traceSMA25 = {
    x: chartData.dates,
    y: chartData.sma25,
    type: 'scatter',
    mode: 'lines',
    name: 'SMA25',
    line: {color: '#33FF57', width: 1}
  };

  const traceSMA75 = {
    x: chartData.dates,
    y: chartData.sma75,
    type: 'scatter',
    mode: 'lines',
    name: 'SMA75',
    line: {color: '#3357FF', width: 1}
  };

  // トレンドライン
  const traceTrendline = {
    x: chartData.dates,
    y: chartData.trendline,
    type: 'scatter',
    mode: 'lines',
    name: 'Trendline',
    line: {color: '#888', width: 2, dash: 'dash'}
  };

  // ADX (サブプロット)
  const traceADX = {
    x: chartData.dates,
    y: chartData.adx,
    type: 'scatter',
    mode: 'lines',
    name: 'ADX',
    line: {color: 'black', width: 1.5},
    xaxis: 'x',
    yaxis: 'y2'
  };
  
  const tracePlusDI = {
    x: chartData.dates,
    y: chartData.plus_di,
    type: 'scatter',
    mode: 'lines',
    name: '+DI',
    line: {color: 'red', width: 1, dash: 'dot'},
    xaxis: 'x',
    yaxis: 'y2'
  };

  const traceMinusDI = {
    x: chartData.dates,
    y: chartData.minus_di,
    type: 'scatter',
    mode: 'lines',
    name: '-DI',
    line: {color: 'blue', width: 1, dash: 'dot'},
    xaxis: 'x',
    yaxis: 'y2'
  };

  // レイアウト設定
  const layout = {
    dragmode: 'zoom',
    showlegend: true,
    xaxis: {
      rangeslider: { visible: false },
      type: 'date'
    },
    yaxis: {
      domain: [0.3, 1],
      title: '株価'
    },
    yaxis2: {
      domain: [0, 0.2],
      title: 'ADX/DI'
    },
    grid: {
      rows: 2,
      columns: 1,
      pattern: 'independent'
    },
    height: 600,
    margin: { t: 30, b: 30, l: 50, r: 30 }
  };

  const data = [traceCandle, traceSMA5, traceSMA25, traceSMA75, traceTrendline, traceADX, tracePlusDI, traceMinusDI];

  // 背景色の設定 (トレンド・レンジ判定)
  const shapes = [];
  let startIndex = 0;
  let currentType = null; // 'up', 'down', 'range', null

  // ADXの閾値
  const ADX_THRESHOLD = 25;

  for (let i = 0; i < chartData.dates.length; i++) {
    const adx = chartData.adx[i];
    const pdi = chartData.plus_di[i];
    const mdi = chartData.minus_di[i];
    
    let type = 'range';
    
    // データがない場合はnull
    if (adx === null || adx === undefined) {
        type = null;
    } else if (adx >= ADX_THRESHOLD) {
      if (pdi > mdi) {
        type = 'up';
      } else {
        type = 'down';
      }
    }

    if (i === 0) {
      currentType = type;
      startIndex = i;
    } else if (type !== currentType) {
      // 状態が変わったのでshapeを追加
      if (currentType !== null) {
        let color = 'rgba(0,0,0,0)';
        if (currentType === 'up') color = 'rgba(255, 0, 0, 0.05)'; // 薄い赤 (上昇トレンド)
        if (currentType === 'down') color = 'rgba(0, 0, 255, 0.05)'; // 薄い青 (下降トレンド)
        if (currentType === 'range') color = 'rgba(255, 255, 0, 0.1)'; // 薄い黄色 (レンジ)

        shapes.push({
          type: 'rect',
          xref: 'x',
          yref: 'paper',
          x0: chartData.dates[startIndex],
          x1: chartData.dates[i],
          y0: 0,
          y1: 1,
          fillcolor: color,
          line: { width: 0 },
          layer: 'below'
        });
      }
      currentType = type;
      startIndex = i;
    }
  }
  
  // 最後の区間を追加
  if (currentType !== null) {
    let color = 'rgba(0,0,0,0)';
    if (currentType === 'up') color = 'rgba(255, 0, 0, 0.05)';
    if (currentType === 'down') color = 'rgba(0, 0, 255, 0.05)';
    if (currentType === 'range') color = 'rgba(255, 255, 0, 0.1)';

    shapes.push({
      type: 'rect',
      xref: 'x',
      yref: 'paper',
      x0: chartData.dates[startIndex],
      x1: chartData.dates[chartData.dates.length - 1],
      y0: 0,
      y1: 1,
      fillcolor: color,
      line: { width: 0 },
      layer: 'below'
    });
  }

  // layoutに追加
  layout.shapes = shapes;

  Plotly.newPlot('mainChart', data, layout);
</script>

    </div>

    <footer class="text-center py-4 text-muted">
      <small>Generated by Stock List Updater</small><br>
      <small>
        <a href="https://github.com/ymd2015/stock_site_updater" target="_blank" rel="noopener">Source on GitHub</a><br>
        <span>Licensed under <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT License</a></span><br>
        <a href="oss_licenses.html" target="_blank" rel="noopener">利用OSSライセンス一覧</a>
      </small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>